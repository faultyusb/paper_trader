{"ast":null,"code":"import _classCallCheck from\"D:\\\\reactJS\\\\paper-trading-app\\\\app_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\reactJS\\\\paper-trading-app\\\\app_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\reactJS\\\\paper-trading-app\\\\app_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\reactJS\\\\paper-trading-app\\\\app_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\reactJS\\\\paper-trading-app\\\\app_frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import StockGraph from'../StockGraph/StockGraph.js';import StockTable from'../StockTable/StockTable.js';import StockMeta from'../StockMeta/StockMeta.js';import Purchase from'../Purchase/Purchase.js';import'./StockInfo.css';var StockInfo=/*#__PURE__*/function(_React$Component){_inherits(StockInfo,_React$Component);var _super=_createSuper(StockInfo);function StockInfo(props){var _this;_classCallCheck(this,StockInfo);_this=_super.call(this,props);_this.updateWindowDimensions=_this.updateWindowDimensions.bind(_assertThisInitialized(_this));_this.state={width:0,height:0,meta_data:{stock_info:\"-\",symbol:\"-\",refreshed:\"-\",time_zone:\"-\"},shares:0,stocks:[{date:new Date(),open:0,high:0,low:0,close:0,volume:0},{date:new Date(),open:0,high:0,low:0,close:0,volume:0}]};return _this;}_createClass(StockInfo,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateWindowDimensions();window.addEventListener('resize',this.updateWindowDimensions);this.fetchStocks();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('resize',this.updateWindowDimensions);}},{key:\"updateWindowDimensions\",value:function updateWindowDimensions(){this.setState({width:window.innerWidth,height:window.innerHeight});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.symbol!==prevProps.symbol){this.setState({stocks:[{date:new Date(\"2020-07-08\"),open:0,high:0,low:0,close:0,volume:0},{date:new Date(\"2020-07-07\"),open:0,high:0,low:0,close:0,volume:0}]});this.fetchStocks();}}},{key:\"fetchStocks\",value:function fetchStocks(){var _this2=this;var SYMBOL=this.props.symbol;var API_KEY='TNPG40VN9O3OQ4PW';var FUNCTION_TYPE='Time Series (Daily)';var API=\"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=\".concat(SYMBOL,\"&outputsize='compact'&apikey=\").concat(API_KEY);fetch(API).then(function(response){return response.json();}).then(function(data){var meta_data=data[\"Meta Data\"];_this2.setState({meta_data:{stock_info:meta_data[\"1. Information\"],symbol:meta_data[\"2. Symbol\"],refreshed:meta_data[\"3. Last Refreshed\"],time_zone:meta_data[\"5. Time Zone\"]}});for(var key in data['Time Series (Daily)']){var temp={};temp['date']=new Date(key);temp['open']=data[FUNCTION_TYPE][key]['1. open'];temp['high']=data[FUNCTION_TYPE][key]['2. high'];temp['low']=data[FUNCTION_TYPE][key]['3. low'];temp['close']=data[FUNCTION_TYPE][key]['4. close'];temp['volume']=data[FUNCTION_TYPE][key]['5. volume'];var joined=_this2.state.stocks.concat(temp);_this2.setState({stocks:joined});}}).catch(function(err){return console.log(err);}).then(function(){_this2.setState({stocks:_this2.state.stocks.reverse()});});}},{key:\"onSubmitHandler\",value:function onSubmitHandler(event){event.preventDefault();console.log(event.target.value);this.setState({shares:event.target.value});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"stock__elements\"},/*#__PURE__*/React.createElement(\"div\",{className:\"stock__graph\"},/*#__PURE__*/React.createElement(StockGraph,{width:this.state.width,data:this.state.stocks})),/*#__PURE__*/React.createElement(\"div\",{className:\"all_stock__info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"meta_info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"stock__meta\"},/*#__PURE__*/React.createElement(StockMeta,{meta_info:this.state.meta_data})),/*#__PURE__*/React.createElement(\"div\",{className:\"stock__table2\"},/*#__PURE__*/React.createElement(StockTable,{latestStock:this.state.stocks[99]||this.state.stocks[0]}))),/*#__PURE__*/React.createElement(\"div\",{className:\"purchase__container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"purchase\"},/*#__PURE__*/React.createElement(Purchase,{amount:this.state.shares,symbol:this.state.meta_data.symbol,price:this.state.stocks[99]||this.state.stocks[0]})))));}}]);return StockInfo;}(React.Component);export{StockInfo as default};","map":{"version":3,"sources":["D:/reactJS/paper-trading-app/app_frontend/src/home_page/StockInfo/StockInfo.js"],"names":["React","StockGraph","StockTable","StockMeta","Purchase","StockInfo","props","updateWindowDimensions","bind","state","width","height","meta_data","stock_info","symbol","refreshed","time_zone","shares","stocks","date","Date","open","high","low","close","volume","window","addEventListener","fetchStocks","removeEventListener","setState","innerWidth","innerHeight","prevProps","SYMBOL","API_KEY","FUNCTION_TYPE","API","fetch","then","response","json","data","key","temp","joined","concat","catch","err","console","log","reverse","event","preventDefault","target","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport StockGraph from '../StockGraph/StockGraph.js';\r\nimport StockTable from '../StockTable/StockTable.js';\r\nimport StockMeta from '../StockMeta/StockMeta.js';\r\nimport Purchase from '../Purchase/Purchase.js';\r\n\r\nimport './StockInfo.css';\r\n\r\nexport default class StockInfo extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n\r\n    this.state = \r\n      {\r\n        width: 0,\r\n        height: 0,\r\n        meta_data: \r\n        {\r\n          stock_info: \"-\",\r\n          symbol: \"-\",\r\n          refreshed: \"-\",\r\n          time_zone: \"-\"\r\n        },\r\n      shares: 0,\r\n      stocks: [\r\n      {\r\n        date: new Date(),\r\n        open: 0,\r\n        high: 0,\r\n        low: 0,\r\n        close: 0,\r\n        volume: 0\r\n      },\r\n      {\r\n        date: new Date(), \r\n        open: 0,\r\n        high: 0,\r\n        low: 0,\r\n        close: 0,\r\n        volume: 0\r\n      },\r\n    ]\r\n  };\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.updateWindowDimensions();\r\n    window.addEventListener('resize', this.updateWindowDimensions);\r\n    this.fetchStocks();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.updateWindowDimensions);\r\n  }\r\n\r\n  updateWindowDimensions() {\r\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    if(this.props.symbol !== prevProps.symbol){\r\n      this.setState({stocks: [\r\n        {\r\n          date: new Date(\"2020-07-08\"),\r\n          open: 0,\r\n          high: 0,\r\n          low: 0,\r\n          close: 0,\r\n          volume: 0\r\n        },\r\n        {\r\n          date: new Date(\"2020-07-07\"), \r\n          open: 0,\r\n          high: 0,\r\n          low: 0,\r\n          close: 0,\r\n          volume: 0\r\n        },\r\n      ]})\r\n      this.fetchStocks();\r\n    }\r\n  }\r\n\r\n  fetchStocks(){\r\n    const SYMBOL = this.props.symbol;\r\n    const API_KEY = 'TNPG40VN9O3OQ4PW';\r\n    const FUNCTION_TYPE = 'Time Series (Daily)';\r\n    const API = `https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=${SYMBOL}&outputsize='compact'&apikey=${API_KEY}`;\r\n\r\n    fetch(API)\r\n    .then(response=>response.json())\r\n      .then(data=>{\r\n        const meta_data = data[\"Meta Data\"];\r\n        this.setState({\r\n          meta_data: {\r\n            stock_info: meta_data[\"1. Information\"],\r\n            symbol: meta_data[\"2. Symbol\"],\r\n            refreshed: meta_data[\"3. Last Refreshed\"],\r\n            time_zone: meta_data[\"5. Time Zone\"]\r\n          }\r\n        });\r\n\r\n        for (var key in data['Time Series (Daily)']){\r\n          let temp = {};\r\n          temp['date'] = new Date(key);\r\n          temp['open'] = (data[FUNCTION_TYPE][key]['1. open']);\r\n          temp['high'] = (data[FUNCTION_TYPE][key]['2. high']);\r\n          temp['low'] = (data[FUNCTION_TYPE][key]['3. low']);\r\n          temp['close'] = (data[FUNCTION_TYPE][key]['4. close']);\r\n          temp['volume'] = (data[FUNCTION_TYPE][key]['5. volume']);\r\n\r\n          let joined = this.state.stocks.concat(temp);\r\n          this.setState({stocks: joined});\r\n        }\r\n      })\r\n      .catch(err => console.log(err))\r\n        .then(()=>{\r\n          this.setState({stocks: this.state.stocks.reverse()});\r\n        }); \r\n\r\n  }\r\n  onSubmitHandler(event){\r\n    event.preventDefault();\r\n    console.log(event.target.value);\r\n    this.setState({shares: event.target.value})\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"stock__elements\">\r\n        <div className=\"stock__graph\">\r\n          <StockGraph width = {this.state.width} data = {this.state.stocks}/>\r\n        </div>\r\n\r\n        <div className=\"all_stock__info\">\r\n          <div className=\"meta_info\">\r\n            <div className=\"stock__meta\">\r\n              <StockMeta meta_info={this.state.meta_data}/>\r\n            </div>\r\n            <div className=\"stock__table2\">\r\n              <StockTable latestStock={this.state.stocks[99] || this.state.stocks[0] }/>\r\n            </div>\r\n          </div>\r\n\r\n          <div className = \"purchase__container\">\r\n            <div className=\"purchase\">\r\n              <Purchase amount={this.state.shares} symbol={this.state.meta_data.symbol} price={this.state.stocks[99] || this.state.stocks[0]}/>\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}